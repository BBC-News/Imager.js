{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnDirectValue","value","Imager","elements","opts","self","this","doc","defaultGifSrc","greyGifSrc","undefined","selector","imagesOffScreen","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","greyTemporarySrc","alt","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","imagesMustHaveWidthOrHeight","removeAttribute","createWidthsMap","getKeys","sort","a","b","divs","findImagesUsingSelector","changeDivsToEmptyImages","nextTick","init","addEvent","getNaturalWidth","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","Object","prototype","call","image","naturalWidth","source","img","width","addEventListener","el","eventName","fn","attachEvent","keys","object","key","push","querySelectorAll","refreshImages","removeHeightAttributes","scrollCheck","clearInterval","interval","slice","initialized","checkImagesNeedReplacing","registerResizeEvent","registerScrollEvent","createGif","element","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","setAttribute","parentNode","replaceChild","isThisElementOnScreen","offset","getPageOffset","elementOffsetTop","offsetParent","offsetTop","images","isResizing","replaceImagesBasedOnScreenDimensions","offsetWidth","offsetHeight","computedWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","devicePixelRatio","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","context","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","module","exports","define","amd"],"mappings":"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"}