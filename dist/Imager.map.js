{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnDirectValue","value","Imager","elements","opts","self","this","doc","undefined","selector","imagesOffScreen","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","widthGetter","img","clientWidth","createWidthsMap","getKeys","sort","a","b","divs","querySelectorAll","changeDivsToEmptyImages","nextTick","init","addEvent","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","addEventListener","el","eventName","fn","attachEvent","Object","keys","object","key","push","prototype","scrollCheck","clearInterval","interval","slice","initialized","checkImagesNeedReplacing","registerResizeEvent","registerScrollEvent","createGif","element","match","RegExp","cloneNode","width","getAttribute","setAttribute","parentNode","replaceChild","isThisElementOnScreen","offset","getPageOffset","elementOffsetTop","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","computedWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","devicePixelRatio","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","context","widths","interpolator","map","baseValue","candidates","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","call","module","exports","define","amd"],"mappings":"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"}